<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creación de compoñentes visuais | Creación de compoñentes visuais</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Descrición">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.0b040f76.css" as="style"><link rel="preload" href="/assets/js/app.a80021bb.js" as="script"><link rel="preload" href="/assets/js/2.980f3844.js" as="script"><link rel="preload" href="/assets/js/11.170e8a10.js" as="script"><link rel="prefetch" href="/assets/js/10.5fe638ec.js"><link rel="prefetch" href="/assets/js/12.d2edea94.js"><link rel="prefetch" href="/assets/js/13.18dc1560.js"><link rel="prefetch" href="/assets/js/3.4319b1b7.js"><link rel="prefetch" href="/assets/js/4.7364160c.js"><link rel="prefetch" href="/assets/js/5.3da2d6a2.js"><link rel="prefetch" href="/assets/js/6.6339c75f.js"><link rel="prefetch" href="/assets/js/7.a6882aa1.js"><link rel="prefetch" href="/assets/js/8.6b46e375.js"><link rel="prefetch" href="/assets/js/9.d9745c26.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0b040f76.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Creación de compoñentes visuais</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  Introdución
</a></div><div class="nav-item"><a href="/config/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Elaboración dun compoñente
</a></div><div class="nav-item"><a href="/caracteristicas/" class="nav-link">
  Características JavaBean
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  Introdución
</a></div><div class="nav-item"><a href="/config/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Elaboración dun compoñente
</a></div><div class="nav-item"><a href="/caracteristicas/" class="nav-link">
  Características JavaBean
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Creación de compoñentes visuais</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/config/#elaboracion-dun-componente-personalizado" class="sidebar-link">Elaboración dun compoñente personalizado</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/config/#editor-de-propiedades-personalizado" class="sidebar-link">Editor de propiedades personalizado</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/config/#como-enlazar-o-panel-personalizado-co-editor-de-propiedades-personalizado" class="sidebar-link">Como enlazar o panel personalizado co editor de propiedades personalizado</a></li></ul></li><li><a href="/config/#engadir-un-evento-a-un-componente" class="sidebar-link">Engadir un evento a un compoñente</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="creacion-de-componentes-visuais"><a href="#creacion-de-componentes-visuais" class="header-anchor">#</a> Creación de compoñentes visuais</h1> <h2 id="elaboracion-dun-componente-personalizado"><a href="#elaboracion-dun-componente-personalizado" class="header-anchor">#</a> Elaboración dun compoñente personalizado</h2> <p>O primeiro a realizar é crear un novo proxecto en NetBeans con un paquete no seu interior e unha clase. O compoñente debe extender das propiedades do compoñente xenérico que se quere personalizar.</p> <p>A clase que implementa o compoñente ten que ser un JavaBean. Para que unha clase Java
sexa un JavaBean ten que cumprir unhas características:</p> <ul><li>Ten que implementar <code>Serializable</code>.</li> <li>Ten que ter un constructor sen parámetros.</li></ul> <p>Con isto xa teriamos un compoñente básico creado e podería engadirse á paleta de
NetBeans.</p> <p>Podemos crear compoñentes personalizados máis complexos cos seguintes pasos:</p> <ol><li><p>Engadir unha propiedade ao compoñente, de tal forma que cando o compoñente se engada a
unha aplicación Java, entre a lista de propiedades saia a propiedade introducila para poder modificala.</p></li> <li><p>Simplemente con isto, se se compila o compoñente (Clean and Build) xa se podería engadir o compoñente á paleta de NetBeans. Para iso hai que pulsar co <strong>botón dereito no
compoñente -&gt; Ferramentas -&gt; Add to Palette.</strong> Seleccionar a categoría Beans, para ter
organizados os Beans personalizados creados.</p></li> <li><p>Para comprobar que funciona pódese crear un novo proxecto Java e engadir un JFrame.
Unha vez creado o JFrame, engadir o novo compoñente creado da paleta Beans.</p></li></ol> <h2 id="editor-de-propiedades-personalizado"><a href="#editor-de-propiedades-personalizado" class="header-anchor">#</a> Editor de propiedades personalizado</h2> <p>Neste caso queremos crear un compoñente con unha propiedade complexa. Para isto non nos serven os editores de propiedades que proporciona NetBeans, polo que é necesario crear un editor de propiedades personalizado.</p> <ol><li><p>Debemos crear unha propiedade complexa cos atributos que desexemos introducir. Para facer isto en Java é necesario crear unha clase nova, que implmente de Serializable.</p></li> <li><p>Engadimos a clase da nova propiedade ao compoñente, o cal tamén debe ser serializable.</p></li> <li><p>A continuación imos crear o panel personalizado do editor. Para iso creamos un novo
<strong>JPanelForm</strong> no paquete onde estamos construíndo o compoñente, e posteriormente, deseñar o panel para que nos permita seleccionar os atributos introducidos e introducir o código necesario para que desempeñe as funcións necesarias.</p></li></ol> <h3 id="como-enlazar-o-panel-personalizado-co-editor-de-propiedades-personalizado"><a href="#como-enlazar-o-panel-personalizado-co-editor-de-propiedades-personalizado" class="header-anchor">#</a> Como enlazar o panel personalizado co editor de propiedades personalizado</h3> <ul><li><p>Para crear un editor de propiedades personalizado debemos implementar unha clase que estenda de <a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.desktop/java/beans/PropertyEditorSupport.html" target="_blank" rel="noopener noreferrer">PropertyEditorSupport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Para iso imos crear unha nova clase no proxecto do compoñente personalizado, que debe redefinir os seguintes métodos:</p> <ul><li><p><strong>supportsCustomEditor:</strong> este método invócao NetBeans para comprobar se hai un
editor personalizado para a propiedade. Neste caso, debe devolver true.</p></li> <li><p><strong>getCustomEditor:</strong> este método debe devolver o panel do editor personalizado.</p></li> <li><p><strong>getJavaInitializationString:</strong> devolve un String que servirá para inicializar o  valor da propiedade cos valores seleccionados no panel. Engadense os nomes dos paquetes porque non se poden incluír os imports.</p></li> <li><p><strong>getValue:</strong> unha vez mostrado o panel e pulsado o botón aceptar, devolve o valor da propiedade complexa.</p></li></ul></li> <li><p>Falta unir o PropertyEditorSuport creado coa propiedade en si, porque non está enlazado de ningunha maneira. Isto faise a través dun BeanInfo que crea NetBeans automaticamente. Para facelo pulsamos co <strong>botón dereito sobre o compoñente personalizado
JPanelImaxe -&gt; Bean Info Editor</strong> e creamos o Bean Info.</p></li> <li><p>Accedemos á vista de deseño da nova clase creada. Buscamos a propiedade introducida e na <strong>“Clase do editor de propiedades”</strong> hai que indicar a clase do panel coa
ruta que inclúa tamén o paquete:</p></li> <li><p>Xa está terminado o compoñente. Pode compilarse <strong>(Clean and Build)</strong> e engadir
o novo panel á un JFrame.</p></li></ul> <h2 id="engadir-un-evento-a-un-componente"><a href="#engadir-un-evento-a-un-componente" class="header-anchor">#</a> Engadir un evento a un compoñente</h2> <ul><li><p>Debemos crear unha interface e personalizar a implementación do método. Para programar a lóxica de xestión do evento, engadirase un Listener ao compoñente e manexaranse os eventos pulsar e soltar botón do rato.</p></li> <li><p>A persoa programadora debe proporcionar unha implementación da interface e decidir o código a executar cando se procuza o evento.</p></li> <li><p>Código de exemplo evento de arrastrar o rato polo panel:</p></li></ul> <details class="custom-block details"><summary>Ver o código interface</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ArrastreListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">arrastre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <details class="custom-block details"><summary>Ver o código compoñente co manexo do evento</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JPanelImaxe</span> <span class="token keyword">extends</span> <span class="token class-name">JPanel</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> ImaxeFondo imaxeFondo<span class="token punctuation">;</span>
    <span class="token keyword">private</span> boolean ratonPresionado <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> Point puntoPresion<span class="token punctuation">;</span>
    <span class="token keyword">private</span> ArrastreListener arrastreListener<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">JPanelImaxe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addMouseListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MouseAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        @Override
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mouseReleased</span><span class="token punctuation">(</span><span class="token parameter">MouseEvent e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ratonPresionado<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Point posicionActual <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>puntoPresion<span class="token punctuation">.</span>x <span class="token operator">-</span> posicionActual<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>arrastreListener <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        arrastreListener<span class="token punctuation">.</span><span class="token function">arrastre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        ratonPresionado <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        @Override
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mousePressed</span><span class="token punctuation">(</span><span class="token parameter">MouseEvent e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ratonPresionado <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            puntoPresion <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addArrastreListener</span><span class="token punctuation">(</span><span class="token parameter">ArrastreListener arrastreListener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>arrastreListener <span class="token operator">=</span> arrastreListener<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeArrastreListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>arrastreListener <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//Faltan getters e setters</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <details class="custom-block details"><summary>Ver código a executar cando se produzca o evento</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token function">PantallaPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jPanelImaxe<span class="token punctuation">.</span><span class="token function">addArrastreListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrastreListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        @Override
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">arrastre</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;arrastre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a80021bb.js" defer></script><script src="/assets/js/2.980f3844.js" defer></script><script src="/assets/js/11.170e8a10.js" defer></script>
  </body>
</html>
